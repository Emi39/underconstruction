{% extends 'base.html' %}

{% block title %}{{ category.name }} - SoftwareCA{% endblock %}

{% block content %}
    <div style="text-align: center; margin: 3rem 0 2rem;">
        <h1 style="margin-bottom: 1rem; color: var(--accent);">
            {{ category.name }}
        </h1>
        {% if category.description %}
            <p style="max-width: 800px; margin: 0 auto 1.5rem; color: #94a3b8;">
                {{ category.description }}
            </p>
        {% endif %}
        
        <form method="get">
            <select name="category" onchange="this.form.submit()" 
                    style="padding: 0.8rem 1.6rem; font-size: 1.1rem; border-radius: 12px; border: 1px solid var(--border); background: var(--card); color: var(--text); cursor: pointer; min-width: 300px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
                <option value="">All Categories</option>
                {% for cat in categories %}
                    <option value="{{ cat.slug }}" {% if selected_category == cat.slug %}selected{% endif %}>
                        {{ cat.name }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>

    <div class="articles">
        {% for article in articles %}
            <div class="article-card">
                <div class="article-content">
                    <h2 class="article-title">{{ article.title }}</h2>
                    <span style="background: var(--accent); color: white; padding: 0.4rem 0.9rem; border-radius: 6px; font-size: 0.9rem; display: inline-block; margin-bottom: 0.8rem;">
                        {{ category.name }}
                    </span>
                    <p class="article-date">Published: {{ article.pub_date|date:"d M Y" }}</p>
                    <p class="article-excerpt">{{ article.content|striptags|truncatewords:40 }}</p>
                    <a href="{% url 'article_detail' slug=article.slug %}" class="read-more">Read more →</a>
                </div>
            </div>
        {% empty %}
            <p style="grid-column: 1 / -1; text-align: center; color: #94a3b8; font-size: 1.1rem;">
                No articles in {{ category.name }} yet — check back soon!
            </p>
        {% endfor %}
    </div>
{% endblock %}